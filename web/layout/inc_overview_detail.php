<section id="hotel-overview" class="container py-5">
    <!-- Tiêu đề khách sạn -->
    <div class="row ">
        <div class="col-12">
            <h1 class="display-5 fw-bold text-dark">Khách sạn Mường Thanh Luxury Sài Gòn</h1>
        </div>
    </div>

    <!-- Thông tin đánh giá và địa chỉ -->
    <div class="row mb-4">
        <div class="col-12 col-md-6 d-flex align-items-center">
            <i class="far fa-map-marker-alt me-2 text-primary"></i>
            <span>261c, Nguyen Van Troi, Phu Nhuan District, Ho Chi Minh, Vietnam</span>
            <a href="#" class="btn btn-outline ms-3">Xem bản đồ</a>
        </div>
    </div>

    <!-- Slideshow hình ảnh và video -->
    <div class="row position-relative">
        <div class="col-12 col-lg-6">
            <div class="position-relative hotel-video">
                <video width="100%" height="auto" loop muted autoplay class="rounded">
                    <source src="https://teaser.hn.ss.bfcplatform.vn/48278_MYTOUR.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="play-icon">
                    <i class="fa-solid fa-play"></i>
                </div>
            </div>
        </div>
        <div class="col-12 col-lg-6">
            <div class="row hotel-gallery">
                <div class="col-6 mb-2">
                    <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://googleapis.tripi.vn/download/storage/v1/b/hotelcdn/o/48278%2FBJ7EPFZ6U8_mu-ng-thanh-luxury-sai.jpg?generation=1615281392470193&alt=media"
                        class="img-fluid rounded" alt="Hotel Image 1">
                </div>
                <div class="col-6 mb-2">
                    <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://s3.ap-southeast-1.amazonaws.com/mytourcdn.com/resources/pictures/hotels/2/oOI3pWnSTvWhFRluMXnCOQ-3-Reception%2520Desk%25201.jpeg"
                        class="img-fluid rounded" alt="Hotel Image 2">
                </div>
                <div class="col-6 mb-2">
                    <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://gcs.tripi.vn/hms_prod/photo/img/459819Hmd/306044928.jpg"
                        class="img-fluid rounded" alt="Hotel Image 3">
                </div>
                <div class="col-6 mb-2 position-relative">
                    <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://gcs.tripi.vn/hms_prod/photo/img/2689xD/266338754.jpg"
                        class="img-fluid rounded" alt="Hotel Image 4">
                    <div class="gallery-overlay">
                        <div class="overlay-content">
                            <span>+63</span>
                            <i class="fa-solid fa-images ms-2"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Modal HTML -->
<div class="modal fade" id="hotelGalleryModal" tabindex="-1" aria-labelledby="hotelGalleryModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="hotelGalleryModalLabel">Khách sạn Mường Thanh Luxury Sài Gòn</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-0">
                <div id="galleryCarouselMain" class="owl-carousel owl-theme gallery-main">
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://s3.ap-southeast-1.amazonaws.com/mytourcdn.com/resources/pictures/hotels/2/oOI3pWnSTvWhFRluMXnCOQ-3-Reception%2520Desk%25201.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://googleapis.tripi.vn/download/storage/v1/b/hotelcdn/o/48278%2FBJ7EPFZ6U8_mu-ng-thanh-luxury-sai.jpg?generation=1615281392470193&alt=media"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://s3.ap-southeast-1.amazonaws.com/mytourcdn.com/resources/pictures/hotels/2/oOI3pWnSTvWhFRluMXnCOQ-3-Reception%2520Desk%25201.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://gcs.tripi.vn/hms_prod/photo/img/459819Hmd/306044928.jpg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://gcs.tripi.vn/hms_prod/photo/img/2689xD/266338754.jpg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/485450xZK/img_6033.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/481422giE/img_8769.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/479913rtK/img_4802.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/474434mLE/20240214_103455.jpg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/485450xZK/img_6033.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/481422giE/img_8769.jpeg"
                            alt="Hotel Image 2">
                    </div>
                </div>
                <!-- Thêm thumbnail carousel -->
                <div id="galleryCarouselThumbs" class="gallery-thumbnails-container owl-carousel owl-theme gallery-thumbs">
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://s3.ap-southeast-1.amazonaws.com/mytourcdn.com/resources/pictures/hotels/2/oOI3pWnSTvWhFRluMXnCOQ-3-Reception%2520Desk%25201.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://googleapis.tripi.vn/download/storage/v1/b/hotelcdn/o/48278%2FBJ7EPFZ6U8_mu-ng-thanh-luxury-sai.jpg?generation=1615281392470193&alt=media"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://s3.ap-southeast-1.amazonaws.com/mytourcdn.com/resources/pictures/hotels/2/oOI3pWnSTvWhFRluMXnCOQ-3-Reception%2520Desk%25201.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://gcs.tripi.vn/hms_prod/photo/img/459819Hmd/306044928.jpg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=840,height=416/https://gcs.tripi.vn/hms_prod/photo/img/2689xD/266338754.jpg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/485450xZK/img_6033.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/481422giE/img_8769.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/479913rtK/img_4802.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/474434mLE/20240214_103455.jpg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/485450xZK/img_6033.jpeg"
                            alt="Hotel Image 2">
                    </div>
                    <div class="item">
                        <img src="https://img.tripi.vn/cdn-cgi/image/width=740,height=400/https://gcs.tripi.vn/hms_prod/review/img/481422giE/img_8769.jpeg"
                            alt="Hotel Image 2">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
    /* Custom CSS cho section */
    #hotel-overview {
        background-color: var(--white);
        padding: 20px 0;
    }

    /* Tiêu đề khách sạn */
    #hotel-overview h1 {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 10px;
        color: #222;
    }

    /* Đánh giá và điểm */
    #hotel-overview .badge.bg-warning {
        background-color: #ff5722 !important;
        color: white !important;
        padding: 5px 8px;
        border-radius: 4px;
    }

    .text-primary {
        color: var(--primary-color) !important;
    }

    #hotel-overview .fw-bold.text-primary {
        color: var(--primary-color) !important;
        font-size: 16px;
        margin-left: 8px;
    }

    /* Địa chỉ */
    #hotel-overview .fa-location-dot {
        color: var(--primary-color) !important;
    }

    #hotel-overview .btn-outline {
        border: 1px solid #ddd;
        color: var(--primary-color);
        padding: 3px 12px;
        border-radius: 4px;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.3s ease;
    }

    #hotel-overview .btn-outline:hover {
        background-color: #f5f5f5;
    }

    /* Phần giá và giảm giá */
    .price-section {
        text-align: right;
        margin-bottom: 15px;
    }

    .original-price {
        text-decoration: line-through;
        color: #888;
        font-size: 14px;
    }

    .discount-badge {
        background-color: #f85757;
        color: white;
        font-weight: 500;
        padding: 3px 8px;
        border-radius: 4px;
        margin-left: 10px;
        font-size: 14px;
    }

    .current-price {
        font-size: 24px;
        font-weight: 700;
        color: #f85757;
        margin-top: 5px;
        display: block;
    }

    .book-now-btn {
        background-color: #f85757;
        color: white;
        font-weight: 600;
        padding: 10px 25px;
        border-radius: 6px;
        border: none;
        transition: all 0.3s ease;
    }

    .book-now-btn:hover {
        background-color: #e04848;
    }

    /* Phần video và gallery */
    .hotel-video {
        overflow: hidden;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .hotel-video video {
        width: 100%;
        height: 350px;
        object-fit: cover;
        cursor: pointer;
    }

    .play-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 60px;
        height: 60px;
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .play-icon i {
        color: white;
        font-size: 24px;
    }

    .play-icon:hover {
        background-color: rgba(0, 0, 0, 0.7);
    }

    /* Gallery ảnh */
    .hotel-gallery {
        margin: 0 0;
    }

    .hotel-gallery .col-6 {
        padding: 0 4px;
    }

    .hotel-gallery img {
        width: 100%;
        height: 172px;
        object-fit: cover;
        border-radius: 8px;
        cursor: pointer;
        margin-bottom: 0;
        transition: transform 0.3s;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .hotel-gallery img:hover {
        transform: scale(1.02);
    }

    .gallery-overlay {
        position: absolute;
        top: 0;
        left: 4px;
        right: 4px;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        color: white;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .gallery-overlay .overlay-content {
        text-align: center;
        font-size: 16px;
        font-weight: 600;
    }

    .gallery-overlay:hover {
        background-color: rgba(0, 0, 0, 0.7);
    }

    /* Modal Gallery */
    #hotelGalleryModal .modal-dialog {
        max-width: 70%;
        margin: 30px auto;
    }

    #hotelGalleryModal .modal-header {
        border-bottom: 1px solid #eee;
        padding: 15px 20px;
    }

    #hotelGalleryModal .modal-title {
        color: #222;
        font-weight: 600;
        font-size: 20px;
    }

    /* Owl Carousel cho gallery chính */
    .gallery-main {
        background-color: #000;
    }

    .gallery-main .item img {
        height: 65vh;
        width: 100%;
        object-fit: contain;
    }

    /* Owl Carousel nav buttons */
    .gallery-main .owl-nav button,
    .gallery-thumbs .owl-nav button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.2) !important;
        border-radius: 50%;
        margin: 0 10px !important;
    }

    .gallery-main .owl-nav button:hover,
    .gallery-thumbs .owl-nav button:hover {
        background: rgba(255, 255, 255, 0.5) !important;
    }

    .gallery-main .owl-prev {
        left: 10px;
    }

    .gallery-main .owl-next {
        right: 10px;
    }

    /* Thumbnails Gallery */
    .gallery-thumbnails-container {
        background-color: #000;
        padding: 15px;
    }

    .gallery-thumbs .item {
        cursor: pointer;
    }

    .gallery-thumbs .item img {
        height: 150px;
        object-fit: cover;
        transition: all 0.3s;
        opacity: 0.6;
        border: 2px solid transparent;
    }

    .gallery-thumbs .owl-item.current .item img {
        opacity: 1;
        border-color: #ff5722;
    }

    .gallery-thumbs .owl-prev {
        left: 10px;
    }

    .gallery-thumbs .owl-next {
        right: 10px;
    }

    @media (max-width: 991px) {
        .gallery-main .item img {
            height: 50vh;
        }
    }

    @media (max-width: 767px) {
        .gallery-main .item img {
            height: 40vh;
        }

        .gallery-thumbs .item img {
            height: 45px;
        }
    }
</style>

<script>
function initOverviewDetailJS() {
    try {
        // Khởi tạo Owl Carousel cho gallery chính
        const mainCarousel = $("#galleryCarouselMain").owlCarousel({
            items: 1,
            loop: false,
            nav: true,
            dots: false,
            margin: 0,
            navText: [
                '<i class="fa fa-chevron-left"></i>',
                '<i class="fa fa-chevron-right"></i>'
            ]
        });

        // Khởi tạo Owl Carousel cho thumbnails
        const thumbCarousel = $("#galleryCarouselThumbs").owlCarousel({
            items: 6,
            loop: false,
            nav: true,
            dots: false,
            margin: 10,
            navText: [
                '<i class="fa fa-chevron-left"></i>',
                '<i class="fa fa-chevron-right"></i>'
            ],
            responsive: {
                0: { items: 3 },
                600: { items: 4 },
                1000: { items: 6 }
            }
        });

        // Xử lý khi click vào ảnh trong gallery
        $('.hotel-gallery img, .gallery-overlay').on('click', function() {
            const index = $(this).closest('.col-6').index();
            $('#hotelGalleryModal').modal('show');
            
            // Di chuyển carousel chính đến ảnh được click
            mainCarousel.trigger('to.owl.carousel', [index, 300]);
            
            // Di chuyển thumbnail và đảm bảo ảnh active ở giữa
            syncThumbnail(index);
        });

        // Xử lý khi click vào thumbnail
        thumbCarousel.on('click', '.owl-item', function() {
            const index = $(this).index();
            mainCarousel.trigger('to.owl.carousel', [index, 300]);
            syncThumbnail(index);
        });

        // Đồng bộ thumbnail khi carousel chính thay đổi
        mainCarousel.on('changed.owl.carousel', function(event) {
            const index = event.item.index;
            syncThumbnail(index);
        });

        // Hàm đồng bộ thumbnail
        function syncThumbnail(index) {
            // Xóa class current khỏi tất cả thumbnails
            thumbCarousel.find('.owl-item').removeClass('current');
            
            // Thêm class current cho thumbnail tương ứng
            thumbCarousel.find('.owl-item').eq(index).addClass('current');
            
            // Tính toán vị trí để thumbnail active ở giữa
            const thumbCount = thumbCarousel.find('.owl-item').length;
            const visibleThumbs = thumbCarousel.find('.owl-item').eq(0).closest('.owl-carousel').data('owl.carousel').settings.items;
            let targetIndex = index - Math.floor(visibleThumbs / 2);
            
            // Đảm bảo targetIndex không vượt quá giới hạn
            if (targetIndex < 0) targetIndex = 0;
            if (targetIndex > thumbCount - visibleThumbs) {
                targetIndex = thumbCount - visibleThumbs;
            }
            
            // Di chuyển thumbnail carousel
            thumbCarousel.trigger('to.owl.carousel', [targetIndex, 300]);
        }

        // Xử lý play/pause video khi click
        $('.hotel-video').on('click', function() {
            const video = $(this).find('video')[0];
            if (video.paused) {
                video.play();
                $(this).find('.play-icon').fadeOut(200);
            } else {
                video.pause();
                $(this).find('.play-icon').fadeIn(200);
            }
        });

    } catch (error) {
        console.error('Error in overview_detail.js:', error);
    }
}

// Kiểm tra jQuery đã load chưa
if (window.jQuery) {
    $(document).ready(initOverviewDetailJS);
} else {
    const waitForJQuery = setInterval(() => {
        if (window.jQuery) {
            clearInterval(waitForJQuery);
            $(document).ready(initOverviewDetailJS);
        }
    }, 100);
}
</script>